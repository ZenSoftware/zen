<mat-dialog-content>
  <zen-loading *ngIf="loading" [backdrop]="false"></zen-loading>

  <zen-register-form *ngIf="data.action === 'create'" (registered)="registered()"></zen-register-form>

  <form id="user-form" [formGroup]="form" novalidate (ngSubmit)="onSubmit()" *ngIf="data.action === 'edit'" class="k-form">
    <div class="row mb-3">
      <div class="col pe-2">
        <kendo-formfield>
          <kendo-floatinglabel text="Username">
            <input kendoTextBox [formControl]="username" />
          </kendo-floatinglabel>
        </kendo-formfield>
      </div>
      <div class="col">
        <kendo-formfield>
          <kendo-floatinglabel text="Email">
            <input kendoTextBox [formControl]="email" />
          </kendo-floatinglabel>
          <kendo-formerror *ngIf="email.errors?.['email'] && !email.errors?.['required']" >Not a valid email</kendo-formerror>
          <kendo-formerror *ngIf="email.errors?.['required']">Required</kendo-formerror>
        </kendo-formfield>
      </div>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions class="d-flex justify-content-between">
  <button type="submit" form="user-form"
    mat-raised-button color="primary"
    *ngIf="data.action === 'edit'"
    [disabled]="loading || form.invalid">
    <i class="fa-solid fa-fw fa-save"></i>
    Save
  </button>

  <!-- <button mat-raised-button (click)="form.markAllAsTouched()" [disabled]="loading">
    <i class="fa-solid fa-fw fa-clipboard-list"></i>
    Validate
  </button> -->

  <button mat-raised-button mat-dialog-close [disabled]="loading">
    <i class="fa-solid fa-fw fa-ban"></i>
    Cancel
  </button>
</mat-dialog-actions>